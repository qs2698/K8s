# AgriForecast 기능적 요구사항 명세서

## 1. 개요

**프로젝트명**: AgriForecast (농산물 가격 예측 플랫폼)  
**목적**: 농산물 도소매상을 위한 실시간 가격 정보 제공 및 AI 기반 가격 예측 서비스  
**기술 스택**: React, React Router, Tailwind CSS, Vite

---

## 2. 인증 및 사용자 관리 기능

### 2.1 회원가입 (Signup)
**우선순위**: 높음  
**기능 설명**: 신규 사용자 회원가입

**상세 요구사항**:
- 사용자 정보 입력 폼 제공
  - 이름 (필수)
  - 아이디 (필수, 중복 체크 필요)
  - 이메일 (필수, 이메일 형식 검증)
  - 비밀번호 (필수, 최소 6자 이상)
  - 비밀번호 확인 (필수, 비밀번호와 일치 검증)
- 비밀번호 표시/숨김 토글 기능
- 입력값 실시간 검증 및 에러 메시지 표시
- 회원가입 성공 시 로그인 페이지로 이동
- API 연동: `POST /api/auth/signup`

**입력 데이터**:
```javascript
{
  fullname: string,
  username: string,
  email: string,
  password: string,
  confirm: string
}
```

---

### 2.2 로그인 (Login)
**우선순위**: 높음  
**기능 설명**: 사용자 인증 및 세션 관리

**상세 요구사항**:
- 아이디/비밀번호 입력 폼
- 비밀번호 표시/숨김 토글 기능
- 입력값 검증 (빈 값 체크)
- 로그인 실패 시 에러 메시지 표시
- 로그인 성공 시:
  - 사용자 정보를 localStorage에 저장
  - 로그인 상태를 전역적으로 업데이트 (이벤트 발생)
  - 홈 페이지로 리다이렉트
- 테스트 계정 정보 표시 (개발용)
- API 연동: `POST /api/auth/login`

**입력 데이터**:
```javascript
{
  username: string,
  password: string
}
```

---

### 2.3 아이디 찾기 (FindId)
**우선순위**: 중간  
**기능 설명**: 이름과 이메일로 아이디 찾기

**상세 요구사항**:
- 이름과 이메일 입력 폼
- 입력값 검증
- 일치하는 계정이 있으면 아이디 표시
- 일치하는 계정이 없으면 에러 메시지 표시
- 결과 표시 후 로그인 페이지로 이동 링크 제공
- API 연동: `POST /api/auth/find-id`

**입력 데이터**:
```javascript
{
  name: string,
  email: string
}
```

---

### 2.4 비밀번호 재설정 (ResetPassword)
**우선순위**: 중간  
**기능 설명**: 현재 비밀번호 확인 후 새 비밀번호로 변경

**상세 요구사항**:
- 아이디, 현재 비밀번호, 새 비밀번호, 새 비밀번호 확인 입력
- 각 비밀번호 필드별 표시/숨김 토글
- 비밀번호 일치 검증
- 비밀번호 최소 길이 검증 (6자 이상)
- 현재 비밀번호 확인 검증
- 비밀번호 변경 성공 시 알림 표시
- API 연동: `POST /api/auth/reset-password`

**입력 데이터**:
```javascript
{
  username: string,
  current: string,
  new: string,
  confirm: string
}
```

---

### 2.5 로그아웃 (Logout)
**우선순위**: 높음  
**기능 설명**: 사용자 세션 종료

**상세 요구사항**:
- 로그아웃 확인 다이얼로그 표시
- localStorage에서 사용자 정보 및 로그인 상태 삭제
- 전역 로그인 상태 업데이트 (이벤트 발생)
- 홈 페이지로 리다이렉트
- API 연동: `POST /api/auth/logout` (선택사항)

---

### 2.6 로그인 상태 관리
**우선순위**: 높음  
**기능 설명**: 전역 로그인 상태 동기화

**상세 요구사항**:
- localStorage 기반 로그인 상태 저장
- 다른 탭에서의 로그인 상태 변경 감지 (storage 이벤트)
- 같은 페이지에서의 로그인 상태 변경 감지 (커스텀 이벤트)
- Header 컴포넌트에서 로그인 상태에 따라 UI 동적 변경
- 보호된 라우트 접근 시 자동 로그인 페이지 리다이렉트

---

## 3. 농산물 가격 조회 및 표시 기능

### 3.1 메인 대시보드 - 실시간 가격 표시 (Home)
**우선순위**: 매우 높음  
**기능 설명**: 주요 농산물의 실시간 가격 정보 표시

**상세 요구사항**:
- **하드코딩된 카드 제거** (현재 요구사항)
- Database에서 실시간 가격 데이터 조회
- 주요 품목별 가격 정보 표시:
  - 품목명 및 단위
  - 현재 가격
  - 전일 대비 등락률 및 방향 (▲/▼)
- 실시간 업데이트:
  - WebSocket 또는 Polling 방식 (30초 간격)
  - 가격 변경 시 자동 UI 갱신
- 로딩 상태 표시
- 에러 처리 및 재시도 로직
- API 연동: `GET /api/prices/current`

**표시 데이터 구조**:
```javascript
{
  productId: string,
  productName: string,
  unit: string,
  currentPrice: number,
  previousPrice: number,
  changeRate: number,
  changeDirection: "up" | "down" | "same",
  lastUpdated: string
}
```

---

### 3.2 가격 예측 차트 표시 (Home)
**우선순위**: 매우 높음  
**기능 설명**: AI 기반 농산물 가격 예측 차트 표시

**상세 요구사항**:
- 품목 선택 기능 (배추, 쌀, 사과, 돼지고기, 고등어 등)
- 예측 기간 선택 (1개월, 3개월, 6개월, 1년)
- 차트 표시:
  - 과거 가격 추이 (실선)
  - 현재 가격 (현재 시점)
  - 예측 가격 추이 (점선 또는 다른 색상)
- 차트 라이브러리 사용 (Chart.js, Recharts 등)
- 예측 신뢰도 표시 (선택사항)
- API 연동: `GET /api/prices/predictions?productId={id}&period={period}`

**표시 데이터 구조**:
```javascript
{
  productId: string,
  productName: string,
  period: string,
  historical: [{ date: string, price: number }],
  current: { date: string, price: number },
  predictions: [{ 
    date: string, 
    price: number, 
    confidence: number 
  }]
}
```

---

### 3.3 상세 가격 분석 페이지 (Detail)
**우선순위**: 높음  
**기능 설명**: 특정 농산물의 상세 가격 분석 정보 제공

**상세 요구사항**:
- 필터 옵션:
  - 품목 선택 (야채류, 과일류 등)
  - 품종 선택 (배추, 사과, 마늘, 양파 등)
  - 기간 설정 (최근 1개월, 1년, 전체, 지정 날짜)
  - 단위 선택 (일별, 주별, 월별)
- KPI 카드 표시:
  - 현재 평균 도매가
  - 전일 대비 등락률
  - 최근 1개월 최고가
  - 최근 1개월 최저가
- 가격 추이 차트:
  - 과거 가격과 예측 가격을 구분하여 표시
  - 범례 제공
- 상세 데이터 테이블:
  - 날짜별 가격, 등락률, 거래량
  - 검색 기능 (날짜 검색)
  - 정렬 기능
- API 연동: `GET /api/prices/detail?productId={id}&startDate={date}&endDate={date}&unit={unit}`

---

### 3.4 시장 동향 및 뉴스 표시 (Home)
**우선순위**: 중간  
**기능 설명**: 농산물 시장 관련 최신 뉴스 및 동향 표시

**상세 요구사항**:
- 최신 뉴스 목록 표시
- 긴급 뉴스 하이라이트 표시
- 뉴스 제목, 내용 요약, 출처, 날짜 표시
- 클릭 시 상세 페이지로 이동 (선택사항)
- API 연동: `GET /api/news/latest` (선택사항)

---

## 4. 가격 예측 기능

### 4.1 예측 모델 통합
**우선순위**: 매우 높음  
**기능 설명**: ML 모델을 통한 농산물 가격 예측

**상세 요구사항**:
- **예측 모델 실행**:
  - LSTM, ARIMA 등 시계열 예측 모델 사용
  - 과거 가격 데이터, 기상 데이터, 시장 동향 데이터를 입력으로 사용
  - 앙상블 모델을 통한 예측 정확도 향상
- **예측 결과 제공**:
  - 1개월, 3개월, 6개월, 1년 예측
  - 예측 신뢰도 점수 제공
  - 예측 결과를 Database에 저장 및 캐싱
- **성능 최적화**:
  - 예측 결과 캐싱 (1시간 TTL)
  - 동일 요청 시 캐시 데이터 반환
- **API 연동**: `GET /api/prices/predictions`

**예측 모델 입력 데이터**:
```javascript
{
  historicalPrices: [{ date: string, price: number }],
  weatherData: { temperature: number, rainfall: number, ... },
  marketTrends: { demand: number, supply: number, ... }
}
```

---

### 4.2 예측 결과 시각화
**우선순위**: 높음  
**기능 설명**: 예측 결과를 차트로 시각화

**상세 요구사항**:
- 과거 가격과 예측 가격을 구분하여 표시
- 예측 구간 표시 (신뢰 구간)
- 인터랙티브 차트 (호버 시 상세 정보 표시)
- 차트 확대/축소 기능
- 데이터 포인트 클릭 시 상세 정보 표시

---

## 5. 커뮤니티 기능

### 5.1 게시판 목록 (Community)
**우선순위**: 높음  
**기능 설명**: 커뮤니티 게시글 목록 조회

**상세 요구사항**:
- 게시글 목록을 테이블 형태로 표시
  - 제목, 작성자, 작성일, 조회수, 댓글 수
- 카테고리 필터링:
  - 전체
  - 도매 정보
  - 소매 노하우
  - 구인/구직
  - 자유게시판
- 정렬 기능 (최신순, 조회수순 등)
- 페이지네이션 (10개 또는 20개 단위)
- 글쓰기 버튼 (로그인 사용자만)
- 게시글 클릭 시 상세 페이지로 이동
- API 연동: `GET /api/community/posts?category={category}&page={page}&limit={limit}`

---

### 5.2 게시글 작성 (CommunityWrite)
**우선순위**: 높음  
**기능 설명**: 새로운 게시글 작성

**상세 요구사항**:
- 로그인 상태 확인 (미로그인 시 로그인 페이지로 리다이렉트)
- 게시글 작성 폼:
  - 제목 (필수)
  - 카테고리 선택 (필수)
  - 내용 (필수)
  - 첨부파일 업로드 (선택)
- 입력값 검증
- 게시글 등록 성공 시 게시판 목록으로 이동
- API 연동: `POST /api/community/posts`

**입력 데이터**:
```javascript
{
  title: string,
  category: string,
  content: string,
  file: File | null
}
```

---

### 5.3 게시글 상세 보기 (CommunityView, CommunityViewMy)
**우선순위**: 높음  
**기능 설명**: 게시글 상세 내용 조회

**상세 요구사항**:
- 게시글 상세 정보 표시:
  - 제목, 작성자, 작성일, 조회수
  - 내용
  - 첨부파일 (있는 경우)
- 댓글 목록 표시:
  - 작성자, 작성일, 내용
- 댓글 작성 기능 (로그인 사용자만)
- 본인 글인 경우:
  - 자동으로 CommunityViewMy로 리다이렉트
  - 글 수정 버튼 표시
- 조회수 증가 (페이지 로드 시)
- API 연동: 
  - `GET /api/community/posts/{id}`
  - `POST /api/community/posts/{id}/comments`

---

### 5.4 게시글 수정 (CommunityEdit)
**우선순위**: 높음  
**기능 설명**: 본인이 작성한 게시글 수정

**상세 요구사항**:
- 작성자 본인만 수정 가능 (권한 확인)
- 기존 게시글 데이터를 폼에 로드
- 게시글 수정 폼 (작성과 동일)
- 기존 첨부파일 정보 표시
- 첨부파일 변경 가능
- 게시글 삭제 기능:
  - 삭제 확인 다이얼로그
  - 삭제 성공 시 게시판 목록으로 이동
- 수정 완료 시 상세 페이지로 이동
- API 연동:
  - `PUT /api/community/posts/{id}`
  - `DELETE /api/community/posts/{id}`

---

## 6. 알림 기능

### 6.1 알림 등록 (미구현, 향후 구현)
**우선순위**: 중간  
**기능 설명**: 특정 농산물 가격이 목표 가격에 도달하면 알림 받기

**상세 요구사항**:
- 품목 선택
- 목표 가격 설정
- 알림 방식 선택 (이메일, SMS, 앱 푸시 등)
- 알림 등록 성공 시 확인 메시지
- API 연동: `POST /api/notifications`

**입력 데이터**:
```javascript
{
  productId: string,
  targetPrice: number,
  notificationType: string[]
}
```

---

### 6.2 받은 알림 목록 (NotificationsReceived)
**우선순위**: 중간  
**기능 설명**: 사용자가 받은 알림 목록 조회

**상세 요구사항**:
- 로그인 상태 확인
- 받은 알림 목록 표시:
  - 품목명
  - 목표 가격
  - 단위
  - 도달 날짜
  - 알림 메시지
- 알림 읽음 처리 (선택사항)
- 알림 삭제 기능 (선택사항)
- API 연동: `GET /api/notifications/received`

---

### 6.3 등록된 알림 관리 (NotificationsDelete)
**우선순위**: 중간  
**기능 설명**: 사용자가 등록한 알림 목록 조회 및 삭제

**상세 요구사항**:
- 로그인 상태 확인
- 등록된 알림 목록 표시:
  - 품목명
  - 목표 가격
  - 알림 메시지
- 알림 삭제 기능:
  - 삭제 확인 다이얼로그
  - 삭제 성공 시 목록에서 제거
- API 연동:
  - `GET /api/notifications/registered`
  - `DELETE /api/notifications/{id}`

---

## 7. 마이페이지 기능

### 7.1 계정 정보 관리 (MyPage)
**우선순위**: 높음  
**기능 설명**: 사용자 프로필 정보 조회 및 수정

**상세 요구사항**:
- 로그인 상태 확인 (미로그인 시 로그인 페이지로 리다이렉트)
- 프로필 정보 표시 및 수정:
  - 이름
  - 이메일 (읽기 전용 또는 수정 가능)
  - 연락처
- 비밀번호 변경:
  - 현재 비밀번호 입력
  - 새 비밀번호 입력
- 변경사항 저장 기능
- 계정 탈퇴 기능 (선택사항)
- MyPageSidebar와 함께 레이아웃 구성
- API 연동:
  - `GET /api/users/me`
  - `PUT /api/users/me`
  - `PUT /api/users/me/password`

---

### 7.2 마이페이지 사이드바 (MyPageSidebar)
**우선순위**: 높음  
**기능 설명**: 마이페이지 네비게이션 메뉴

**상세 요구사항**:
- 사용자 프로필 정보 표시:
  - 프로필 사진
  - 이름
  - 이메일
- 메뉴 항목:
  - 계정정보
  - 받은 알림
  - 알림 삭제
- 현재 경로에 따른 활성 메뉴 하이라이트
- 고객 지원 링크
- 로그아웃 버튼

---

## 8. 공통 기능

### 8.1 레이아웃 및 네비게이션
**우선순위**: 높음  
**기능 설명**: 전역 레이아웃 및 네비게이션

**상세 요구사항**:
- Header 컴포넌트:
  - 로고 및 브랜드명
  - 메인 네비게이션 (홈, 상세검색, 커뮤니티)
  - 로그인 상태에 따른 프로필/로그인 버튼 표시
- Layout 컴포넌트:
  - 모든 페이지에 공통 적용
  - Header 포함
  - 반응형 디자인 지원
- 푸터 (선택사항)

---

### 8.2 에러 처리
**우선순위**: 높음  
**기능 설명**: 전역 에러 처리 및 사용자 피드백

**상세 요구사항**:
- API 호출 실패 시 에러 메시지 표시
- 네트워크 오류 처리
- 404 페이지 (선택사항)
- 500 에러 페이지 (선택사항)
- 에러 바운더리 구현 (선택사항)

---

### 8.3 로딩 상태 표시
**우선순위**: 중간  
**기능 설명**: 데이터 로딩 중 사용자 피드백

**상세 요구사항**:
- 데이터 로딩 중 로딩 인디케이터 표시
- 스켈레톤 UI (선택사항)
- 로딩 상태 관리 (useState 또는 Context API)

---

### 8.4 반응형 디자인
**우선순위**: 높음  
**기능 설명**: 다양한 디바이스에서의 사용성

**상세 요구사항**:
- 모바일, 태블릿, 데스크톱 지원
- Tailwind CSS를 활용한 반응형 레이아웃
- 터치 친화적 UI (모바일)

---

## 9. 비기능적 요구사항

### 9.1 성능
- 페이지 로딩 시간: 3초 이내
- API 응답 시간: 1초 이내
- 실시간 업데이트 지연: 30초 이내

### 9.2 보안
- 비밀번호 암호화 (해싱)
- JWT 토큰 기반 인증 (향후 구현)
- XSS 방지
- CSRF 방지

### 9.3 호환성
- 최신 브라우저 지원 (Chrome, Firefox, Safari, Edge)
- 모바일 브라우저 지원

### 9.4 접근성
- 키보드 네비게이션 지원
- 스크린 리더 지원 (선택사항)
- 색상 대비 준수

---

## 10. 향후 구현 예정 기능

### 10.1 고급 검색 기능
- 농산물 가격 고급 필터링
- 다중 조건 검색
- 검색 결과 저장

### 10.2 데이터 내보내기
- 가격 데이터 CSV/Excel 다운로드
- 차트 이미지 저장

### 10.3 소셜 기능
- 게시글 좋아요
- 게시글 공유
- 사용자 팔로우

### 10.4 관리자 기능
- 사용자 관리
- 게시글 관리
- 가격 데이터 관리

---

## 11. 우선순위 요약

### 매우 높음 (P0)
1. 실시간 가격 데이터 조회 및 표시
2. 가격 예측 모델 통합
3. 예측 차트 표시
4. 로그인/로그아웃
5. 커뮤니티 기본 기능 (목록, 작성, 조회, 수정)

### 높음 (P1)
1. 회원가입
2. 상세 가격 분석 페이지
3. 마이페이지
4. 댓글 기능
5. 레이아웃 및 네비게이션

### 중간 (P2)
1. 아이디 찾기
2. 비밀번호 재설정
3. 알림 기능
4. 시장 동향 뉴스

### 낮음 (P3)
1. 고급 검색
2. 데이터 내보내기
3. 소셜 기능



